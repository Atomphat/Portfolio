// Mobile nav toggle
const hamburger = document.getElementById('hamburger');
const menu = document.getElementById('menu');
if (hamburger && menu){
  hamburger.addEventListener('click', () => menu.classList.toggle('open'));
}

// Year in footer
const y = document.getElementById('year');
if (y) y.textContent = new Date().getFullYear();

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(a => a.addEventListener('click', e => {
  const id = a.getAttribute('href');
  const el = document.querySelector(id);
  if (el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
}));

// Reveal on scroll
const observer = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{ if (e.isIntersecting) e.target.classList.add('visible'); });
},{threshold:.15});
document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));

// Project modal data (with bilingual desc)
const PROJECTS = {
 p1: {
  title: 'Random Food App',
  img: "https://i.ibb.co/Pzgqg17Y/Screenshot-20250518-184026.png",
  tech: ['.NET MAUI', 'C#', 'Android'],
  // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô (‡∏Å‡∏≤‡∏£‡πå‡∏î)
  desc_EN: 'Android app built with .NET MAUI that randomly suggests what to eat today‚Äîsimple, fast, and fun.',
  desc_TH: '‡πÅ‡∏≠‡∏õ Android ‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢ .NET MAUI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ß‡πà‡∏≤ ‚Äú‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ‚Äù ‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏∏‡∏Å',
  // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏¢‡∏≤‡∏ß (‡πÉ‡∏ô‡πÇ‡∏°‡∏î‡∏≠‡∏•)
  long_EN: 'A cross-platform mobile app (Android) built with .NET MAUI. Tap to get random meal ideas, save favorites, and reshuffle instantly. Designed for quick daily decisions.',
  long_TH: '‡πÅ‡∏≠‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (Android) ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ .NET MAUI ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î ‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏°‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÑ‡∏ß‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô',
  // ‡∏•‡∏¥‡∏á‡∏Å‡πå: ‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏° (‡πÄ‡∏ä‡πà‡∏ô GitHub / APK / Play Store)
  links: [
    { label:'APK',  href:'#', disabled:true },
    { label:'Code', href:'#', disabled:true }
  ]
},

  p2: {
    title: 'E-commerce Prototype',
    img: 'https://images.unsplash.com/photo-1547658719-da2b51169166?q=80&w=1600',
    desc_EN: 'A car e-commerce prototype built with HTML, CSS, and JavaScript, demonstrating front-end programming and interactive features',
    desc_TH: '‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡πá‡∏ö E-commerce ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ HTML, CSS, ‡πÅ‡∏•‡∏∞ JavaScript ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ù‡∏±‡πà‡∏á Front-end ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö',
    links:[ {label:'Case Study', href:'#', disabled:true}, {label:'Figma', href:'#', disabled:true} ]
  },
  p3: {
    title: 'Develope chatbot',
    img: 'https://images.unsplash.com/photo-1542831371-29b0f74f9713?q=80&w=1600',
    desc_EN: 'Developed a prototype chatbot using Python and the Typhoon 2.1 (Gemma) model with voice input/output. The system allows Thai Social Security members to ask questions about their rights and benefits, then receive natural language answers. This project highlights skills in AI integration, NLP, and conversational interface development.',
    desc_TH: '‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡∏î‡πâ‡∏ß‡∏¢ Python ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏• Typhoon 2.1 (Gemma) ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ï‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ AI ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏†‡∏≤‡∏©‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ (NLP) ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏™‡∏ô‡∏ó‡∏ô‡∏≤',
    links:[ {label:'Live', href:'#', disabled:true}, {label:'Code', href:'#', disabled:true} ]
  }
};

// Modal logic
const modal = document.getElementById('projectModal');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const modalLinks = document.getElementById('modalLinks');

function openProject(id){
  const p = PROJECTS[id];
  if (!p) return;
  modalImg.src = p.img;
  modalTitle.textContent = p.title;
  const lang = (document.querySelector('html').dataset.lang || 'EN').toUpperCase();
  modalDesc.textContent = lang==='TH' ? (p.desc_TH||p.desc_EN) : p.desc_EN;
  modalLinks.innerHTML = '';
  p.links.forEach(l=>{
    const a = document.createElement('a');
    a.textContent = l.label;
    a.className = 'btn ghost small';
    if (l.disabled) { a.href = '#'; a.setAttribute('aria-disabled','true'); }
    else { a.href = l.href; a.target = '_blank'; a.rel = 'noreferrer'; }
    modalLinks.appendChild(a);
  });
  if (typeof modal.showModal === 'function') modal.showModal();
}

Array.from(document.querySelectorAll('[data-readmore]')).forEach(btn=>{
  btn.addEventListener('click', ()=> openProject(btn.dataset.readmore));
});
document.getElementById('modalClose')?.addEventListener('click', ()=> modal.close());

// i18n dictionary (TH/EN) ‚Äî no parentheses; values switch cleanly
const I18N = {
  EN: {
    title: 'Atom Portfolio',
    brand:'Atom',
    nav_home:'Home', nav_about:'About', nav_projects:'Projects', nav_skills:'Skills', nav_contact:'Contact',
    hero_tag:'üöÄ Full stack developer', hero_hi:'Hi, I‚Äôm', hero_name:'Phatthana Pomthong',
    hero_lead:'Computer Science student at Bangkok University. I am passionate about coding and web application development. I sharpen my skills by building real projects with HTML, CSS, JavaScript, Python, and .NET MAUI, focusing on writing clean code and creating practical solutions.',
    btn_see_projects:'See Projects',
    currently:'Currently', cur_1:'Building a sky-blue portfolio', cur_2:'Experimenting with micro-interactions', cur_3:'Open to internships',

    about_title:'About Me',
    about_name:'Name', about_name_val:'Phatthana Pomthong',
    about_nick:'Nickname', about_nick_val:'Atom',
    about_role:'Role', about_role_val:'Developer',
    about_loc:'Location', about_loc_val:'Ayutthaya, Thailand',
    about_age:'Age', about_age_val:'22',
    about_edu:'Education', about_edu_val:'Computer Science, Bangkok University',

    soft:'Soft Skills',
    soft_1:'Teamwork',
    soft_2:'Fast learner',
    soft_3:'On-the-spot problem solving',
    soft_4:'English communication',
    soft_5:'Resilient & punctual',

    hard:'Hard Skills',
    hard_1:'Python ‚Äî Basic',
    hard_2:'HTML ‚Äî Basic',
    hard_3: 'CSS / JavaScript ‚Äî Beginner',
    hard_4: '.NET MAUI ‚Äî Basic',
    hard_5: 'Git/GitHub, Figma ‚Äî Proficient',

    proj_title:'Projects', chip_web:'Application', chip_ui:'UI', chip_algo:'Chatbot', read_more:'Read more',

    skills_title:'Skills', skills_fe:'Front-End:', skills_fe_val:'HTML, CSS, JS, a11y',
    skills_uiux:'UI/UX:', skills_uiux_val:'Wireframing, Prototyping, Design systems',
    skills_tools:'Tools:', skills_tools_val:'Figma, Git/GitHub, Vite, CodeSandbox',

    contact_title:'Contact',
    label_name:'Name', label_email:'Email', label_msg:'Message',
    btn_send:'Send', elsewhere:'Elsewhere',
    footer_name:'Atomphat', footer_built:'Built with ‚ô•'
  },
  TH: {
    title:'‡πÅ‡∏ü‡πâ‡∏°‡∏™‡∏∞‡∏•‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á ‡∏û‡∏±‡∏í‡∏ô‡∏∞',
    brand:'Atom',
    nav_home:'‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', nav_about:'‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö', nav_projects:'‡∏ú‡∏•‡∏á‡∏≤‡∏ô', nav_skills:'‡∏ó‡∏±‡∏Å‡∏©‡∏∞', nav_contact:'‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
    hero_tag:'üöÄ Full stack developer', hero_hi:'‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠', hero_name:'‡∏û‡∏±‡∏í‡∏ô‡∏∞ ‡∏õ‡πâ‡∏≠‡∏°‡∏ó‡∏≠‡∏á',
    hero_lead:'‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û ‡∏™‡∏ô‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô ‡∏ú‡∏°‡∏ù‡∏∂‡∏Å‡∏ù‡∏ô‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á ‡∏ó‡∏±‡πâ‡∏á HTML, CSS, JavaScript, Python ‡πÅ‡∏•‡∏∞ .NET MAUI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á',
    btn_see_projects:'‡∏î‡∏π‡∏ú‡∏•‡∏á‡∏≤‡∏ô',
    currently:'‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ', cur_1:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ò‡∏µ‡∏°‡∏ü‡πâ‡∏≤‡∏™‡∏î‡πÉ‡∏™', cur_2:'‡∏•‡∏≠‡∏á‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÅ‡∏≠‡∏Ñ‡∏ä‡∏±‡∏ô', cur_3:'‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏ù‡∏∂‡∏Å‡∏á‡∏≤‡∏ô',

    about_title:'‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏â‡∏±‡∏ô',
    about_name:'‡∏ä‡∏∑‡πà‡∏≠', about_name_val:'‡∏û‡∏±‡∏í‡∏ô‡∏∞ ‡∏õ‡πâ‡∏≠‡∏°‡∏ó‡∏≠‡∏á',
    about_nick:'‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô', about_nick_val:'‡∏≠‡∏∞‡∏ï‡∏≠‡∏°',
    about_role:'‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó', about_role_val:'‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤',
    about_loc:'‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà', about_loc_val:'‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤, ‡πÑ‡∏ó‡∏¢',
    about_age:'‡∏≠‡∏≤‡∏¢‡∏∏', about_age_val:'22',
    about_edu:'‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤', about_edu_val:'‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û',

    soft:'Soft Skills',
    soft_1:'‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡∏°‡πÑ‡∏î‡πâ‡∏î‡∏µ',
    soft_2:'‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÑ‡∏ß',
    soft_3:'‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ',
    soft_4:'‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÑ‡∏î‡πâ',
    soft_5:'‡∏≠‡∏î‡∏ó‡∏ô ‡∏ï‡∏£‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤',

    hard:'Hard Skills',
    hard_1:'Python ‚Äî ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
    hard_2:'HTML ‚Äî ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
    hard_3:'CSS / JavaScript ‚Äî ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô',
    hard_4:'.NET MAUI ‚Äî ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
    hard_5:'Git/GitHub, Figma - ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç',

    proj_title:'‡∏ú‡∏•‡∏á‡∏≤‡∏ô', chip_web:'‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô', chip_ui:'UI', chip_algo:'‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó', read_more:'‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠',

    skills_title:'‡∏ó‡∏±‡∏Å‡∏©‡∏∞', skills_fe:'Front-End:', skills_fe_val:'HTML, CSS, JS, a11y',
    skills_uiux:'UI/UX:', skills_uiux_val:'Wireframing, Prototyping, Design systems',
    skills_tools:'‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠:', skills_tools_val:'Figma, Git/GitHub, Vite, CodeSandbox',

    contact_title:'‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
    label_name:'‡∏ä‡∏∑‡πà‡∏≠', label_email:'‡∏≠‡∏µ‡πÄ‡∏°‡∏•', label_msg:'‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°',
    btn_send:'‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°', elsewhere:'‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô',
    footer_name:'Atomphat', footer_built:'‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏à ‚ô•'
  }
};

const translations = {
  EN: {
    cert_title: "Certificates",
    cert_chatbot_title: "Python Chatbot Development",
    cert_chatbot_desc: "Certificate in using Python to develop chatbots",
    cert_cyber_title: "Cybersecurity Basics",
    cert_cyber_desc: "Certificate in fundamental Cybersecurity knowledge",
  },
  TH: {
    cert_title: "‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á",
    cert_chatbot_title: "‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡∏î‡πâ‡∏ß‡∏¢ Python",
    cert_chatbot_desc: "‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Python ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó",
    cert_cyber_title: "‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô Cybersecurity",
    cert_cyber_desc: "‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô Cybersecurity",
  }
};


// Apply i18n
function applyI18n(lang){
  const dict = I18N[lang] || I18N.EN;
  document.documentElement.setAttribute('lang', lang.toLowerCase());
  document.querySelector('html').dataset.lang = lang;
  document.querySelectorAll('[data-i18n-key]').forEach(el=>{
    const k = el.getAttribute('data-i18n-key');
    if (dict[k] !== undefined) el.textContent = dict[k];
  });

  // Update project card descriptions to current language
  const p1 = document.querySelector('[data-project="p1"] [data-i18n-key="p1_desc"]');
  const p2 = document.querySelector('[data-project="p2"] [data-i18n-key="p2_desc"]');
  const p3 = document.querySelector('[data-project="p3"] [data-i18n-key="p3_desc"]');
  if (p1) p1.textContent = lang==='TH'? PROJECTS.p1.desc_TH : PROJECTS.p1.desc_EN;
  if (p2) p2.textContent = lang==='TH'? PROJECTS.p2.desc_TH : PROJECTS.p2.desc_EN;
  if (p3) p3.textContent = lang==='TH'? PROJECTS.p3.desc_TH : PROJECTS.p3.desc_EN;
}

// Language toggle with localStorage
const langBtn = document.getElementById('langToggle');
function setLang(next){
  localStorage.setItem('portfolio_lang', next);
  applyI18n(next);
  langBtn.textContent = next==='EN' ? 'TH' : 'EN';
}
langBtn?.addEventListener('click', ()=>{
  const cur = (document.querySelector('html').dataset.lang)||'EN';
  setLang(cur==='EN'?'TH':'EN');
});

// Initialize language
const saved = localStorage.getItem('portfolio_lang');
setLang(saved || 'EN');

// Tiny form handler (mailto)
const form = document.getElementById('contactForm');
const msg = document.getElementById('formMsg');
if (form){
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const data = new FormData(form);
    const name = encodeURIComponent(data.get('name'));
    const email = encodeURIComponent(data.get('email'));
    const text = encodeURIComponent(data.get('message'));
    const subject = `Portfolio contact from ${name}`;
    const body = `From: ${name} (%20${email}%20)\n\n${text}`;
    window.location.href = `mailto:phatthana718@gmail.com?subject=${subject}&body=${body}`;
    if (msg) {
      const th = document.documentElement.getAttribute('lang')==='th';
      msg.textContent = th ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‚Ä¶' : 'Opening your email app‚Ä¶';
    }
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const skillSection = document.querySelector("#skills");
  const fills = document.querySelectorAll(".skill-bar .fill");
  const percents = document.querySelectorAll(".skill-bar .percent");

  const skillObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        fills.forEach((fill, i) => {
          const target = parseInt(fill.dataset.percent, 10);

          // trigger bar
          setTimeout(() => {
            fill.style.width = target + "%";
          }, 200);

          // trigger number
          let current = 0;
          const interval = setInterval(() => {
            if (current >= target) {
              clearInterval(interval);
              return;
            }
            current++;
            percents[i].textContent = current + "%";
          }, 2000 / target);
        });

        skillObserver.unobserve(entry.target); // run once
      }
    });
  }, { threshold: 0.2 });

  skillObserver.observe(skillSection);
}
);
